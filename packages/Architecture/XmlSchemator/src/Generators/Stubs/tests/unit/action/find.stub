<?php

namespace App\Containers\{{section-name}}\{{container-name}}\Tests\Unit;

use App\Containers\{{section-name}}\{{container-name}}\Actions\Find{{model-name}}ByIdAction;
use App\Containers\{{section-name}}\{{container-name}}\Models\{{model-name}};
use App\Containers\{{section-name}}\{{container-name}}\Tests\TestCase;
use App\Containers\{{section-name}}\{{container-name}}\UI\API\Requests\Find{{model-name}}ByIdRequest;

/**
 * Class {{class-name}}.
 *
 * @group unit
 * @group {{~section-name}}
 * @group {{~section-name}}_unit
 * @group {{~container-name}}
 * @group {{~container-name}}_unit
 * @group {{~model-name}}
 * @group {{~model-name}}_unit
 */
class {{class-name}} extends TestCase
{
    public function test_{{~model-name}}_can_be_found_by_id(): void
    {
        // find a random instance of the model
        ${{~model-name}}_id = {{model-name}}::inRandomOrder()->value('id');

        // create a data object
        $data = ['id' => env('HASH_ID')
            ? $this->encode(${{~model-name}}_id)
            : ${{~model-name}}_id];

        // create a new Request with this data
        $request = Find{{model-name}}ByIdRequest::injectData($data);

        // create a specific Action and pass the Request to the Action
        ${{~model-name}} = app(Find{{model-name}}ByIdAction::class)->run($request);

        // assert that everything is correct!
        $this->assertInstanceOf({{model-name}}::class, ${{~model-name}});
    }
}
