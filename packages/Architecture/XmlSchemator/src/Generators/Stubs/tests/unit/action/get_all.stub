<?php

namespace App\Containers\{{section-name}}\{{container-name}}\Tests\Unit;

use App\Containers\{{section-name}}\{{container-name}}\Actions\GetAll{{collection-name}}Action;
use App\Containers\{{section-name}}\{{container-name}}\Models\{{model-name}};
use App\Containers\{{section-name}}\{{container-name}}\Tests\TestCase;
use App\Containers\{{section-name}}\{{container-name}}\UI\API\Requests\GetAll{{collection-name}}Request;
use Illuminate\Pagination\LengthAwarePaginator;

/**
 * Class {{class-name}}.
 *
 * @group unit
 * @group {{~section-name}}
 * @group {{~section-name}}_unit
 * @group {{~container-name}}
 * @group {{~container-name}}_unit
 * @group {{~collection-name}}
 * @group {{~collection-name}}_unit
 */
class {{class-name}} extends TestCase
{
    public function test_{{~collection-name}}_can_be_fetched_in_bulk(): void
    {
        // create a new Request with this data
        $request = GetAll{{collection-name}}Request::injectData([]);

        // create a specific Action and pass the Request to the Action
        ${{~collection-name}} = app(GetAll{{collection-name}}Action::class)->run($request);

        // assert that everything is correct!
        $this->assertInstanceOf(LengthAwarePaginator::class, ${{~collection-name}});

        $this->assertContainsOnlyInstancesOf({{model-name}}::class, ${{~collection-name}});

        $this->assertCount(env('PAGINATION_LIMIT_DEFAULT'), ${{~collection-name}});
    }
}
